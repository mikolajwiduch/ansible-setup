- name: Debug group variable debug_var
  debug:
    var: debug_var

- name: Debug docker_containers variable
  debug:
    var: docker_containers

- name: Debug group variables
  debug:
    msg: "Group {{ group_names }} has docker_containers: {{ docker_containers }}"

- name: Create Docker Compose file
  template:
    src: docker-compose.j2
    dest: /home/{{ ansible_user }}/docker-compose.yml
  when: docker_containers is defined and docker_containers | length > 0

- name: Start containers using Docker Compose
  command: docker-compose up -d
  args:
    chdir: /home/{{ ansible_user }}
  when: docker_containers is defined and docker_containers | length > 0